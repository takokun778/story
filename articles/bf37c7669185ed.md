---
title: "ã©ã†ã—ã¦ã‚‚Goã§é–‹ç™ºã—ãŸã„ï¼"
emoji: "ğŸ"
type: "tech"
topics:
  - "go"
  - "nodejs"
  - "golang"
  - "node"
published: true
published_at: "2022-10-31 20:05"
---

# ã¯ã˜ã‚ã«

ç„¡æ–™ç’°å¢ƒå¤§å¥½ãï¼ãƒ¬ãƒƒãƒ„è²§ä¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ï¼
ç„¡æ–™ã§é–‹ç™ºã§ãã‚‹ç’°å¢ƒã¯éå¸¸ã«ã‚ã‚ŠãŒãŸã„ã§ã™ãŒã€ãªã‹ãªã‹Goã‚’å®Ÿè¡Œã§ãã‚‹ã‚‚ã®ã¯å°‘ãªã„ã§ã™ã€‚ã€‚ã€‚

https://qiita.com/rana_kualu/items/f7fc4916b7dc9797839e

https://qiita.com/relu/items/b60330ea3137f2f745c5

ã“ã¡ã‚‰ã®ç´¹ä»‹è¨˜äº‹ã‚’çœºã‚ã¦ã„ãŸã‚‰ [cyclic](https://www.cyclic.sh/) ã¨ã„ã†è‰¯ã•ã’ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚
ãŸã ã€é–‹ç™ºã§ãã‚‹ã®ã¯`Node`ã¨ã®ã“ã¨ã€‚
ã©ã†ã«ã‹ã—ã¦`Go`ã§é–‹ç™ºã§ãã‚‹ã‚ˆã†ã«ãªã‚‰ãªã„ã‹ãªã‚ã¨æ€ã„è©¦ã—ã¦ã¿ãŸã®ã§ã”ç´¹ä»‹ã—ã¾ã™ï¼

# `cyclic`ã«ã¤ã„ã¦

https://docs.cyclic.sh/overview/architecture

ã«ã‚ˆã‚‹ã¨`cyclic`ã¯`AWS`ã‚’åˆ©ç”¨ã—ã¦`Lambda`ãªã©ã‚’åˆ©ç”¨ã—ã¦æ§‹ç¯‰ã•ã‚Œã‚‹ã¿ãŸã„ã§ã™ã€‚

`S3`ã‚„`DynamoDB`ã‚‚ä½¿ãˆã‚‹ã®ã§å¤ªã£è…¹ã§ã™ã­ï¼

https://docs.cyclic.sh/overview/limits

åˆ¶é™ã¯ã‚ã‚Šã¾ã™ãŒã†ã¾ãæ´»ç”¨ã™ã‚Œã°ã¡ã‚‡ã£ã¨ã—ãŸã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã™ã‚‹ã®ã«ã¯ååˆ†ãã†ã§ã™ã€‚

# ã²ã¨ã¾ãš`Node`ã‹ã‚‰`Go`ã‚’èµ·å‹•ã—ã¦ã¿ã‚‹

`Node`ã‹ã‚‰`Go`ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã‚Œã°æ´»è·¯ãŒè¦‹å‡ºã›ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚
[child-process](https://nodejs.org/api/child_process.html#child-process)ã‚’å‚è€ƒã«`Go`ãƒã‚¤ãƒŠãƒªã«ã¦ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã£ã¦`Node`ã‹ã‚‰å‘¼ã³å‡ºã—ã¦ã¿ã¾ã—ãŸã€‚

ç„¡äº‹ã«èµ·å‹•&ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸï¼

```bash
npm run start

> fs-go-on-node@1.0.0 start
> node index.js

stderr: 2022/10/31 18:41:38 go server running...
```

```bash
curl http://localhost:3000
Hello, Go!%
```

(stderr ...???)

è©¦ã—ã«ä½œã£ã¦ã¿ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã«ç½®ã„ã¦ã‚ã‚Šã¾ã™ã€‚

https://github.com/takokun778/fs-go-on-node

# ã„ã–ãƒ‡ãƒ—ãƒ­ã‚¤

`Node`ã‹ã‚‰`Go`ã‚’èµ·å‹•ã™ã‚‹ã“ã¨ãŒç¢ºèªã§ããŸã®ã§ã„ã–ãƒ‡ãƒ—ãƒ­ã‚¤ã¸ï¼

`cyclic`ã¨`GitHub`ã‚’é€£æºã—ã¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã‚’ã½ã¡ã½ã¡ã—ã¦[starter-micro-api](https://github.com/cyclic-software/starter-micro-api)ãŒãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã—ãŸã€‚
ã“ã¡ã‚‰ã‚’æ”¹é€ ã—ã¦ã„ãã¾ã™ã€‚
ï¼ˆæœ€çµ‚çš„ã«ã¯åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦é€£æºã•ã›ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ï¼‰

`index.js`ã‚’æ”¹è‰¯ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ä»¥ä¸‹ã®ç”»é¢ã«...

![](https://storage.googleapis.com/zenn-user-upload/36c0107203f8-20221031.png)

`cyclic`ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®å‡ºåŠ›ãŒã€‚

```bash
stderr: ./main: ./main: cannot execute binary file
```

ãƒã‚¤ãƒŠãƒªãŒå®Ÿè¡Œã§ããªã„ã ã¨...

ãã†ã„ãˆã°ã€ç§ã®é–‹ç™ºç’°å¢ƒ`mac`ã ã£ãŸã˜ã‚ƒã‚“ã€‚
`Lambda`ã®OSã¯`Amazon Linux 2`ã‹ã€‚ãã—ã¦Architecturesã‚‚`x86_64`ã‹ã‚‚ãªã€‚

https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/lambda-runtimes.html

ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã‚’ä»¥ä¸‹ã«ä¿®æ­£ã—ã¦ã¿ã¦å†ã³ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚

```bash
GOOS=linux GOARCH=amd64 go build -o main main.go
```

ç„¡äº‹ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæˆåŠŸã—ã‚¢ã‚¯ã‚»ã‚¹ã«ã‚‚æˆåŠŸã—ã¾ã—ãŸï¼

```bash
2022-10-31T10:52:16.320Z: [CYCLIC] Building...
2022-10-31T10:52:16.327Z: [CYCLIC] cached, updating...
2022-10-31T10:52:17.240Z: From https://github.com/takokun778/fs-cyclic-go
 * branch            51607ce26b04d3349ff0001778140149aa4fc2c7 -> FETCH_HEAD
2022-10-31T10:52:17.243Z: Warning: you are leaving 1 commit behind, not connected to
any of your branches:

  007e552 first commit

2022-10-31T10:52:17.245Z: HEAD is now at 51607ce first commit
2022-10-31T10:52:17.390Z: [CYCLIC] verifying...
2022-10-31T10:52:17.664Z: [CYCLIC] using: node:v16.18.0 npm:8.11.0 runtime:nodejs16.x
2022-10-31T10:52:17.666Z: [CYCLIC] installing dependencies from: package.json
2022-10-31T10:52:17.916Z: npm
2022-10-31T10:52:17.918Z:  WARN config production Use `--omit=dev` instead.
2022-10-31T10:52:18.015Z: 
up to date in 119ms
2022-10-31T10:52:18.020Z: [CYCLIC] running build if defined...
2022-10-31T10:52:18.311Z: [CYCLIC] pruning dev dependencies...
2022-10-31T10:52:18.635Z: 
up to date, audited 1 package in 91ms
2022-10-31T10:52:18.637Z: 
found 0 vulnerabilities
2022-10-31T10:52:18.649Z: [CYCLIC] packaging 6.36 MB...
2022-10-31T10:52:18.960Z: [CYCLIC] done packaging
[CYCLIC] deploying...
2022-10-31T10:52:25.040Z: deployed ap-northeast-2 -  6.068s
2022-10-31T10:52:25.042Z: SUCCESS

took 9.0 seconds
api deployed at:
```

```bash
curl https://xxxxx-xxxxxxxxx-xxx.cyclic.app/
Hello, Go!%    
```

ä»Šå›ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã«ç½®ã„ã¦ãŠãã¾ã™ã€‚

https://github.com/takokun778/fs-cyclic-go

# èª¿æ•´ã—ãŸã‚ã‚Œã“ã‚Œ

æœ€åˆã¯ãƒã‚¤ãƒŠãƒªãŒãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¦ã„ãªã„ã®ã‹ãªã¨æ€ã„

1. `S3`ã«ãƒã‚¤ãƒŠãƒªã‚’é…ç½®
2. `Lambda`èµ·å‹•æ™‚ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
3. ãƒã‚¤ãƒŠãƒªèµ·å‹•

ã‚’è©¦ã¿ã‚‹ã‚‚`Lambda`å†…ã¸ã¯æ¨©é™çš„ã«æ›¸ãè¾¼ã¿ãŒç¦æ­¢ã ã£ãŸã£ã½ãã¦å¤±æ•—...

# è§£æ±ºã—ãŸã„ã‚ã‚Œã“ã‚Œ

ã¨ã‚Šã‚ãˆãšå‹•ã‹ã—ãŸã‹ã£ãŸã ã‘ã ã£ãŸã®ã§
å®Ÿç”¨åŒ–ã™ã‚‹ãŸã‚ã«ã¯èª¿æ•´ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã€‚

- ãƒ­ã‚°ãŒ`stderr`ã§åãå‡ºã•ã‚Œã‚‹
- ãƒã‚¤ãƒŠãƒªã‚’GitHubã«ä¿å­˜ã—ãŸããªã„ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ“ãƒ«ãƒ‰ã—ãŸã„ï¼‰

# ãã®ä»–

ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

```bash
node --version
v16.15.1
```

```bash
go version
go version go1.19.2 darwin/arm64
```

# ãŠã‚ã‚Šã«

ã©ã†ã«ã‹ã—ã¦ç„¡ç†ã‚„ã‚Š`Go`ã§å®Ÿè£…ã™ã‚‹ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã¿ã¾ã—ãŸã€‚
ãŸã£ãŸã²ã¨ã¤ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã—ã‹ä½œã£ã¦ã„ãªã„ã®ã§ãŒã£ã¤ã‚Šæ§‹ç¯‰ã§ãã‚‹ã‹ã¯ä»Šå¾Œã‚‚è¦èª¿æŸ»ã¨ã„ã£ãŸã¨ã“ã‚ã§ã™ã­ã€‚
ã¾ã ã¾ã èª¿æ•´ã™ã¹ãã“ã¨ã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™ãŒã©ã†ã—ã¦ã‚‚`Go`ã§é–‹ç™ºã—ãŸã„æ–¹ã¯ãœã²è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼
ï¼ˆwasmä½¿ã„ã“ãªã›ã‚Œã°ã‚‚ã£ã¨ç„¡ç†ã‚„ã‚ŠGoé–‹ç™ºã®ç’°å¢ƒã‚’é–‹æ‹“ã§ããŸã‚Šã™ã‚‹ã®ã‹ãªãã€‚ã€‚ã€‚ï¼‰
